<!doctype html>
<html lang="en" dir="rtl">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      {% load staticfiles %}
    <!-- Bootstrap CSS -->

    <link rel="stylesheet" type="text/css" href="{% static 'jump_tube/bootstrap-4.3.1-dist/css/bootstrap.min.css' %}" />

      
<script src="{% static 'jump_tube/bootstrap-4.3.1-dist/js/bootstrap.min.js' %}" ></script>


    <title>JumpTube</title>
   </head>
  <body>
           <style>

.overflow-auto1 {
  height: 500px;
  overflow: auto;
}

div.relative {
  position: relative;
  width: 800px;
  height: 400px;
  border: 3px solid #73AD21;
} 

div.absolute {
  position: absolute;
  top: 80px;
  right: 0;
  width: 200px;
  height: 100px;
  border: 3px solid #73AD21;
}
div.sticky {
  position: -webkit-sticky;
  position: sticky;
  top: 0;
  background-color: yellow;
  padding: 50px;
  font-size: 20px;
}

div.fixed {
  position: fixed;
  left: 0;
  right: 0;
  z-index: 1030;
}
</style>
<a href="/admin/jump_tube/video/" class="addlink"> </a>
      <div class="row">
                

<div id="scroll" class="col-sm-6 col-md-3 overflow-auto1" >
     {% if user.is_authenticated %}
                	<a class="new btn btn-info" href="/admin/jump_tube/video/" target="_blank">See all videos</a>   
    {% endif %}
<br>
        <center>
               {% for s in subs %}
                   <button id="sb-{{s.id}}" class="new btn btn-light" onclick="player.seekTo({{s.starting_in_seconds}});
                            if(isPlayer360()){
                                var spParams = {};
                                spParams['yaw'  ] = {{s.yaw   }};
                                spParams['pitch'] = {{s.pitch }};
                                spParams['roll' ] = {{s.roll  }};
                                spParams['fov'  ] = {{s.fov   }};
                          
                                player.setSphericalProperties(spParams);
                           }
                           player.playVideo();" 
                           
                           >
                 {% if s.picture %}
                <img src={{s.picture.url}} class="img-thumbnail"  >          
                {% endif %}
                       {{s.text}}
                </button>
             {% if user.is_authenticated %}
                           <a class="new btn btn-info" href="/admin/jump_tube/subtitle/{{s.id}}" >edit</a> 
                           {% endif %}
    <br >
               {% endfor %}
        </center>
</div>





      <div id="player_col" class="col-sm-6 col-md-9" >
  
              
       <!-- 1. The <iframe> (and video player) will replace this <div> tag. -->
            
         <div class="embed-responsive embed-responsive-16by9">
             
           <div class="embed-responsive-item" id="player"></div>
             
           </div>
        
             
      <div id="panel360">

    <style>
  .current-values {
    color: #666;
    font-size: 12px;
  }
</style>
          {% if user.is_authenticated %}
<!-- Display spherical property values and enable user to update them. -->
<table style="border: 0; width: 640px;">
  <tr style="background: #fff;">
    <td>
      <label for="yaw-property">yaw:</label>
      <input type="text" id="yaw-property" style="width: 80px"><br>
      <div id="yaw-current-value" class="current-values"> </div>
    </td>
    <td>
      <label for="pitch-property">pitch: </label>
      <input type="text" id="pitch-property" style="width: 80px"><br>
      <div id="pitch-current-value" class="current-values"> </div>
    </td>
    <td>
      <label for="roll-property">roll: </label>
      <input type="text" id="roll-property" style="width: 80px"><br>
      <div id="roll-current-value" class="current-values"> </div>
    </td>
    <td>
      <label for="fov-property">fov: </label>
      <input type="text" id="fov-property" style="width: 80px"><br>
      <div id="fov-current-value" class="current-values"> </div>
    </td>
       {% if user.is_authenticated %}
    <td style="vertical-align: bottom;">
      <button id="spherical-properties-button">Update properties</button>
    </td>
      {% endif %}
  </tr>
</table>

           {% endif %}

    <script type="text/javascript">
    var tag = document.createElement('script');
  tag.id = 'iframe-demo';
  tag.src = 'https://www.youtube.com/iframe_api';
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  var PROPERTIES = ['yaw', 'pitch', 'roll', 'fov'];
  var updateButton = document.getElementById('spherical-properties-button');

  // Don't display current spherical settings because there aren't any.
  function hideCurrentSettings() {
    for (var p = 0; p < PROPERTIES.length; p++) {
      document.getElementById(PROPERTIES[p] + '-current-value').innerHTML = '';
    }
  }

  // Retrieve current spherical property values from the API and display them.
  function updateSetting() {
    if (!player || !player.getSphericalProperties) {
      hideCurrentSettings();
    } else {
      let newSettings = player.getSphericalProperties();
      if (Object.keys(newSettings).length === 0) {
        hideCurrentSettings();
      } else {
        for (var p = 0; p < PROPERTIES.length; p++) {
          if (newSettings.hasOwnProperty(PROPERTIES[p])) {
            currentValueNode = document.getElementById(PROPERTIES[p] +
                                                       '-current-value');
            currentValueNode.innerHTML = ('current: ' +
                newSettings[PROPERTIES[p]].toFixed(4));
          }
        }
      }
    }
    requestAnimationFrame(updateSetting);
  }
  updateSetting();

  // Call the API to update spherical property values.
  updateButton.onclick = function() {
    var sphericalProperties = {};
    for (var p = 0; p < PROPERTIES.length; p++) {
      var propertyInput = document.getElementById(PROPERTIES[p] + '-property');
      sphericalProperties[PROPERTIES[p]] = parseFloat(propertyInput.value);
    }
    player.setSphericalProperties(sphericalProperties);
  }
    
    
</script>

        
    <div id=" = 'spherical-properties-button'">

    </div>

          
      </div>


      </div>
  </div>

   
    <script type="text/javascript">
      // 2. This code loads the IFrame Player API code asynchronously.
      var tag = document.createElement('script');

      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

            
    
       var spParam = {};
       {% if initial_subtitle %}
            spParam['yaw'  ] = {{initial_subtitle.yaw   }};
            spParam['pitch'] = {{initial_subtitle.pitch }};
            spParam['roll' ] = {{initial_subtitle.roll  }};
            spParam['fov'  ] = {{initial_subtitle.fov   }};
        {% else %}
            spParam['yaw'  ] = {{video.yaw   }};
            spParam['pitch'] = {{video.pitch }};
            spParam['roll' ] = {{video.roll  }};
            spParam['fov'  ] = {{video.fov   }};
        {% endif %}
    
      // 3. This function creates an <iframe> (and YouTube player)
      //    after the API code downloads.
      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          height: '390',
          width: '640',
          videoId: '{{video_id}}',
           events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
      }
       
        function isPlayer360() {
            let newSettings = player.getSphericalProperties();
            if (Object.keys(newSettings).length === 0) {
                return false;
            }
            return true;
        }
          

      // 4. The API will call this function when the video player is ready.
      function onPlayerReady(event) {
       {% if initial_subtitle %}
            event.target.seekTo({{initial_subtitle.starting_in_seconds}});
            document.getElementById("sb-{{initial_subtitle.id}}").focus();
        {% else %}
            event.target.seekTo({{video.starting_in_seconds}});
         {% endif %}
        event.target.playVideo();
 	       
      }
	  
         var  NotYetsetSphericalProperties = true;
        function onPlayerStateChange(event) {
       
        if( isPlayer360() && NotYetsetSphericalProperties)
        {
        NotYetsetSphericalProperties = false;        
        event.target.setSphericalProperties(spParam);
        }
        
    
       
      }
	  

    </script>

        {% if user.is_authenticated %}
          
<div class="row" id='debug'>
   <div class="well tab-content">
                    
                      <div class="tab-pane active" id="post-object-form">
                        
                          <form action="/api/subtitles/" method="POST" enctype="multipart/form-data" class="form-horizontal" novalidate="">
                            <fieldset>
                              <input type="hidden" name="csrfmiddlewaretoken" value="6wt0kKfgUBRXaE41n56lIBRhenF5NAbDvTJht2Rgzlh0rbENy9UfHqbsHRFxD81Z">
                              

  

  
    

<div class="form-group">
  
    <label class="col-sm-2 control-label ">
      Video
    </label>
  

  <div class="col-sm-10">
    <select class="form-control" name="video">
      
      
          
            <option value="http://127.0.0.1:8000/api/videos/15/">15 איך להתקין וואטסאפ במחשב | מחשבים למתחילים https://www.youtube.com/watch?v=QqAY0USF9zk uploads/2019/06/12/wts.srt</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/16/">16 India moving their head fom file</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/17/">17 Tzipori from file</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/18/">18 360 Tzipori https://www.youtube.com/watch?v=DK8qsG9SUlw</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/19/">19 Shai meeting from file</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/20/">20 Shai meeting from youtube https://www.youtube.com/watch?v=Qch6XnuFL4I</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/21/">21 תוכנת וורד - שיעור 4 - הגדרות פסקאות ומרווחים | מחשבים למתחילים https://www.youtube.com/watch?v=s5Q7CLhcuko</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/22/">22 שיעור מצולם | הלם https://www.youtube.com/watch?v=pPdYlSTw3wY</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/23/">23  https://www.youtube.com/watch?v=VEjzc7dZxUk</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/24/">24 Python on Azure: Part 1—Building Django apps with Visual Studio Code | Azure Friday https://www.youtube.com/watch?v=0Bk0dw2Ktbg</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/25/">25 Python on Azure: Part 2—Deploying Django services to Azure Web Apps | Azure Friday https://www.youtube.com/watch?v=FHJvsvbD_cQ</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/26/">26  https://www.youtube.com/watch?v=Ry4U1OvOq8E</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/34/">34  https://www.youtube.com/watch?v=btRNa3CItMc</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/37/">37 מדרסה - שיעור מס' 1 - שיחת היכרות בין מחמוד לגילעד https://www.youtube.com/watch?v=Zj2-me7tuVU</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/39/">39  https://www.youtube.com/watch?v=YzRQXQPhkpA</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/40/">40 מומנטים https://www.youtube.com/watch?v=BQRH_23aKbE</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/42/">42 ד"ר הראל ארנון בכנס קהלת בנושא זהותה של ישראל כמדינת הלאום https://www.youtube.com/watch?v=xlMyHhuqyLw</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/43/">43 סדרת הרצאות אגרוטק - הדברה ביולוגית, ד"ר צביקה מנדל https://www.youtube.com/watch?v=5rx15cGQYfk</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/44/">44  https://www.youtube.com/watch?v=HaLw4J4ETp4</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/46/">46  https://www.youtube.com/watch?v=TfjBQJFcn3s</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/48/">48 מלחמת העולם השנייה – מפה מונפשת https://www.youtube.com/watch?v=yUzpLl3CZJM</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/49/">49  https://www.youtube.com/watch?v=ledJBbRfH8g</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/51/">51  https://www.youtube.com/watch?v=aywx7laq0VI</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/53/">53  https://www.youtube.com/watch?v=p3XNsjMYNHg</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/55/">55 מה שהראתי ליונתן https://www.youtube.com/watch?v=kai5FgFnL84</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/56/">56 שיעור נהיגה משוגע שרוטונים https://www.youtube.com/watch?v=p3QSXPQ3fco</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/57/">57 קורס צילום מעשי - שיעור ראשון https://www.youtube.com/watch?v=w2KwcAGXTbg</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/58/">58 Mark Zuckerberg &amp; Yuval Noah Harari in Conversation https://www.youtube.com/watch?v=Boj9eD0Wug8</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/59/">59 חדשות השבת: ההסדר עם שרה נתניהו: תוכל להמשיך בשירות הציבורי | 15.06.19 https://www.youtube.com/watch?v=wbqMP5aw23k uploads/2019/06/16/news.srt</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/60/">60 תיעוד ב 360° VR של אזכרת משה בן צדיק - חלק ראשון https://www.youtube.com/watch?v=hqlRbz-BA4g</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/61/">61 ניצוץ ממציאים ביחד המצאות לIOT ב 360° https://www.youtube.com/watch?v=yuddRDwwyOk</option>
          
      
          
            <option value="http://127.0.0.1:8000/api/videos/62/">62 Baahubali 2 Full HD movie https://www.youtube.com/watch?v=7mt6O7GcRdg</option>
          
      
    </select>

    

    
  </div>
</div>

  

  
    <div class="form-group ">
  
    <label class="col-sm-2 control-label ">
      Text
    </label>
  

  <div class="col-sm-10">
    <textarea name="text" class="form-control"></textarea>

    

    
  </div>
</div>

  

  
    <div class="form-group ">
  
    <label class="col-sm-2 control-label ">
      Index
    </label>
  

  <div class="col-sm-10">
    <input name="index" class="form-control" type="number" value="">

    

    
  </div>
</div>

  

  
    <div class="form-group ">
  
    <label class="col-sm-2 control-label ">
      Starting in seconds
    </label>
  

  <div class="col-sm-10">
    <input name="starting_in_seconds" class="form-control" type="number" value="">

    

    
  </div>
</div>

  

  
    <div class="form-group ">
  
    <label class="col-sm-2 control-label ">
      Duration in seconds
    </label>
  

  <div class="col-sm-10">
    <input name="duration_in_seconds" class="form-control" type="number" value="">

    

    
  </div>
</div>

  

  
    <div class="form-group ">
  
    <label class="col-sm-2 control-label ">
      Yaw
    </label>
  

  <div class="col-sm-10">
    <input name="yaw" class="form-control" type="number" value="">

    

    
  </div>
</div>

  

  
    <div class="form-group ">
  
    <label class="col-sm-2 control-label ">
      Pitch
    </label>
  

  <div class="col-sm-10">
    <input name="pitch" class="form-control" type="number" value="">

    

    
  </div>
</div>

  

  
    <div class="form-group ">
  
    <label class="col-sm-2 control-label ">
      Roll
    </label>
  

  <div class="col-sm-10">
    <input name="roll" class="form-control" type="number" value="">

    

    
  </div>
</div>

  

  
    <div class="form-group ">
  
    <label class="col-sm-2 control-label ">
      Fov
    </label>
  

  <div class="col-sm-10">
    <input name="fov" class="form-control" type="number" value="">

    

    
  </div>
</div>

  

  
    <div class="form-group ">
  
    <label class="col-sm-2 control-label ">
      Picture
    </label>
  

  <div class="col-sm-10">
    <input name="picture" type="file" value="">

    

    
  </div>
</div>

  


                              <div class="form-actions">
                                <button class="btn btn-primary js-tooltip" title="" data-original-title="Make a POST request on the Sub Title List resource">POST</button>
                              </div>
                            </fieldset>
                          </form>
                        
                      </div>
                    

                    <div class="tab-pane" id="post-generic-content-form">
                      
                        <form action="/api/subtitles/" method="POST" class="form-horizontal">
                          <fieldset>
                            


  <div class="form-group">
    <label for="id__content_type" class="col-sm-2 control-label">Media type:</label>
    <div class="col-sm-10">
      <select name="_content_type" data-override="content-type" id="id__content_type" class="form-control">
  <option value="application/json" selected="">application/json</option>

  <option value="application/x-www-form-urlencoded">application/x-www-form-urlencoded</option>

  <option value="multipart/form-data">multipart/form-data</option>

</select>
      <span class="help-block"></span>
    </div>
  </div>

  <div class="form-group">
    <label for="id__content" class="col-sm-2 control-label">Content:</label>
    <div class="col-sm-10">
      <textarea name="_content" cols="40" rows="10" data-override="content" id="id__content" class="form-control">{
    "video": null,
    "text": "",
    "index": null,
    "starting_in_seconds": null,
    "duration_in_seconds": null,
    "yaw": null,
    "pitch": null,
    "roll": null,
    "fov": null,
    "picture": null
}</textarea>
      <span class="help-block"></span>
    </div>
  </div>


                            <div class="form-actions">
                              <button class="btn btn-primary js-tooltip" title="" data-original-title="Make a POST request on the Sub Title List resource">POST</button>
                            </div>
                          </fieldset>
                        </form>
                      
                    </div>
                  </div>
   

<button onclick="myFunction()">Jump</button>




<form id="myForm" action="/action_page.php">
  Second: <input type="text" name="fname" value="0"><br>
  yaw: <input type="text" name="fname" value="0"><br>
  pitch: <input type="text" name="fname" value="0"><br>
  roll: <input type="text" name="fname" value="0"><br>
  fov: <input type="text" name="fname" value="0"><br>
  current_sub_id: <input type="text" name="fname" value=""><br>
</form> 
<a class="new btn btn-success" href="/video_init_from_srt/{{ video.id }}/">Init subtitles</a>   

<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
    

<script type="text/javascript">
    
    function myFunction() {
        var x = parseFloat(document.getElementById("myForm").elements.item(0).value);
        //  document.getElementById("demo").innerHTML = parseInt(x);
        var sphericalProperties = {};
        sphericalProperties['yaw'  ] = parseFloat(document.getElementById("myForm").elements.item(1).value);
        sphericalProperties['pitch'] = parseFloat(document.getElementById("myForm").elements.item(2).value);
        sphericalProperties['roll' ] = parseFloat(document.getElementById("myForm").elements.item(3).value);
        sphericalProperties['fov'  ] = parseFloat(document.getElementById("myForm").elements.item(4).value);
        player.seekTo(x);
        player.playVideo();
        player.setSphericalProperties(sphericalProperties);
    }
    </script>
     

 
          </div>

         {% endif %}
          
  </body>
</html>
